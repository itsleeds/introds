---
title: "Practical: More Advanced Steps - Statistics"
---

Dive deeper into statistical analysis and advanced data science techniques.

## Exercise 1: Working with Transport Data

### Creating Simple Transport Analysis in R

```{r}
#| eval: false

library(tidyverse)

# Create a simple trip dataset
trips <- data.frame(
  trip_id = 1:10,
  distance_km = c(5.2, 3.1, 7.8, 2.5, 15.3, 4.2, 6.7, 8.9, 3.4, 5.8),
  mode = c("bus", "walk", "car", "walk", "train", "bus", "car", "bike", "walk", "bus"),
  duration_min = c(25, 15, 20, 10, 45, 20, 18, 30, 12, 22)
)

# Calculate average speed by mode
trip_summary <- trips %>%
  mutate(speed_kmh = (distance_km / duration_min) * 60) %>%
  group_by(mode) %>%
  summarise(
    avg_speed = mean(speed_kmh),
    avg_distance = mean(distance_km),
    count = n()
  )

print(trip_summary)
```

**Your Task**:
- Which transport mode has the highest average speed?
- Calculate the total distance traveled across all trips
- Create a bar plot showing trip counts by mode

### Visualization

```{r}
#| eval: false

library(ggplot2)

# Create a bar plot of trips by mode
ggplot(trips, aes(x = mode)) +
  geom_bar(fill = "steelblue") +
  labs(title = "Number of Trips by Transport Mode",
       x = "Transport Mode",
       y = "Number of Trips") +
  theme_minimal()
```

## Exercise 2: Statistical Testing

### In R

```{r}
#| eval: false

library(tidyverse)

# Compare mpg between automatic and manual cars
t_test_result <- t.test(mtcars$mpg ~ mtcars$am)
print(t_test_result)

# Calculate correlation between variables
correlation <- cor(mtcars$mpg, mtcars$wt)
print(paste("Correlation between mpg and weight:", round(correlation, 3)))
```

**Your Task**:
- Interpret the t-test results
- What is the correlation between horsepower and mpg?
- Is there a significant difference in fuel efficiency between automatic and manual cars?

### In Python

```{python}
#| eval: false

import pandas as pd
import seaborn as sns
from scipy import stats

df = sns.load_dataset('mpg')

# Calculate correlation
correlation = df['weight'].corr(df['mpg'])
print(f"Correlation between weight and mpg: {correlation:.3f}")

# Simple t-test comparing two groups
group1 = df[df['origin'] == 'usa']['mpg']
group2 = df[df['origin'] == 'japan']['mpg']

t_stat, p_value = stats.ttest_ind(group1, group2)
print(f"T-statistic: {t_stat:.3f}, p-value: {p_value:.4f}")
```

## Download the Code

You can download the code for this exercise:

::: {.callout-tip}
## Download Options
- [Download R code](../../code/practical-advanced-statistics.R)
- [Download Python code](../../code/practical-advanced-statistics.py)
:::

## Common Issues & Solutions

::: {.callout-note}
## Understanding p-values
A p-value < 0.05 typically indicates a statistically significant result. This means the difference is unlikely due to chance alone.
:::

::: {.callout-note}
## Correlation vs Causation
A strong correlation does not imply causation. Always consider other factors and domain knowledge.
:::

## Key Takeaways

After completing this exercise, you should be able to:

✅ Perform statistical tests  
✅ Calculate and interpret correlations  
✅ Understand p-values and significance  
✅ Work with transport and real-world data

## Bonus Challenge

If you finish early, try this:

1. **Find a real dataset** online (e.g., from [data.gov.uk](https://www.data.gov.uk/) or [Our World in Data](https://ourworldindata.org/))
2. **Load it** into R or Python
3. **Create 3 visualizations** that tell a story about the data
4. **Share your findings** with the group!

## Resources for Practice

- [R for Data Science (free book)](https://r4ds.hadley.nz/)
- [Python Data Science Handbook](https://jakevdp.github.io/PythonDataScienceHandbook/)
- [TidyTuesday](https://github.com/rfordatascience/tidytuesday) - Weekly data challenges
