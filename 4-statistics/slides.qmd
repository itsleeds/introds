---
title: "4. Statistics"
format: revealjs
---

## Statistical Analysis

Going deeper with your data

---

## Correlation

Measuring relationships between variables

---

### Correlation in R

```r
# Pearson correlation
cor(mtcars$mpg, mtcars$wt)

# Correlation matrix
cor(mtcars[, c("mpg", "wt", "hp")])

# With p-values
cor.test(mtcars$mpg, mtcars$wt)
```

---

## Statistical Testing

Comparing groups

---

### T-test in R

```r
# Compare mpg between automatic and manual cars
t.test(mtcars$mpg ~ mtcars$am)

# Independent samples
group1 <- mtcars[mtcars$cyl == 4, ]$mpg
group2 <- mtcars[mtcars$cyl == 8, ]$mpg
t.test(group1, group2)
```

---

## Regression

Modeling relationships

---

### Linear Regression in R

```r
# Fit a model
model <- lm(mpg ~ wt + hp, data = mtcars)

# View results
summary(model)

# Predictions
predict(model, newdata = data.frame(wt = 3, hp = 150))
```

---

## Working with Transport Data

Real-world analysis

---

### Transport Analysis in R

```r
library(tidyverse)

trips <- data.frame(
  trip_id = 1:10,
  distance_km = c(5.2, 3.1, 7.8, 2.5, 15.3, 4.2, 6.7, 8.9, 3.4, 5.8),
  mode = c("bus", "walk", "car", "walk", "train", "bus", "car", "bike", "walk", "bus"),
  duration_min = c(25, 15, 20, 10, 45, 20, 18, 30, 12, 22)
)

# Calculate speed
trip_summary <- trips %>%
  mutate(speed_kmh = (distance_km / duration_min) * 60) %>%
  group_by(mode) %>%
  summarise(
    avg_speed = mean(speed_kmh),
    avg_distance = mean(distance_km)
  )
```

---

## Python Content (Optional)

If you're interested in Python, here are some equivalent concepts

---

### Correlation in Python

```python
import pandas as pd
from scipy import stats

df = sns.load_dataset('mpg')

# Correlation
df['weight'].corr(df['mpg'])

# Correlation matrix
df[['mpg', 'weight', 'horsepower']].corr()

# With p-value
stats.pearsonr(df['weight'], df['mpg'])
```

---

### T-test in Python

```python
from scipy import stats

# Compare by transmission
usa = df[df['origin'] == 'usa']['mpg']
japan = df[df['origin'] == 'japan']['mpg']

t_stat, p_value = stats.ttest_ind(usa, japan)
print(f"t-statistic: {t_stat:.3f}")
print(f"p-value: {p_value:.4f}")
```

---

### Linear Regression in Python

```python
from sklearn.linear_model import LinearRegression
import numpy as np

# Prepare data
X = df[['weight', 'horsepower']].dropna()
y = df.loc[X.index, 'mpg']

# Fit model
model = LinearRegression()
model.fit(X, y)

# Predictions
model.predict([[3, 150]])
```

---

### Transport Analysis in Python

```python
import pandas as pd

trips = pd.DataFrame({
    'trip_id': range(1, 11),
    'distance_km': [5.2, 3.1, 7.8, 2.5, 15.3, 4.2, 6.7, 8.9, 3.4, 5.8],
    'mode': ['bus', 'walk', 'car', 'walk', 'train', 'bus', 'car', 'bike', 'walk', 'bus'],
    'duration_min': [25, 15, 20, 10, 45, 20, 18, 30, 12, 22]
})

# Calculate speed
trips['speed_kmh'] = (trips['distance_km'] / trips['duration_min']) * 60

summary = trips.groupby('mode').agg({
    'speed_kmh': 'mean',
    'distance_km': 'mean'
})
```

---

## Key Takeaways

✅ Understand correlations
✅ Test hypotheses
✅ Fit regression models
✅ Interpret statistical results
✅ Apply to real-world data
