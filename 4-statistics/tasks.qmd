---
title: "4. Statistics - Tasks"
---

Complete these exercises to practice statistical analysis.

## Exercise 1: Transport Data Analysis

### In R

```r
library(tidyverse)

# Create a simple trip dataset
trips <- data.frame(
  trip_id = 1:10,
  distance_km = c(5.2, 3.1, 7.8, 2.5, 15.3, 4.2, 6.7, 8.9, 3.4, 5.8),
  mode = c("bus", "walk", "car", "walk", "train", "bus", "car", "bike", "walk", "bus"),
  duration_min = c(25, 15, 20, 10, 45, 20, 18, 30, 12, 22)
)

# Calculate average speed by mode
trip_summary <- trips %>%
  mutate(speed_kmh = (distance_km / duration_min) * 60) %>%
  group_by(mode) %>%
  summarise(
    avg_speed = mean(speed_kmh),
    avg_distance = mean(distance_km),
    count = n()
  )

print(trip_summary)
```

**Your Tasks**:
- Which transport mode has the highest average speed?
- Calculate the total distance traveled across all trips
- Create a bar plot showing trip counts by mode

### In Python

```python
import pandas as pd
import matplotlib.pyplot as plt

trips = pd.DataFrame({
    'trip_id': range(1, 11),
    'distance_km': [5.2, 3.1, 7.8, 2.5, 15.3, 4.2, 6.7, 8.9, 3.4, 5.8],
    'mode': ['bus', 'walk', 'car', 'walk', 'train', 'bus', 'car', 'bike', 'walk', 'bus'],
    'duration_min': [25, 15, 20, 10, 45, 20, 18, 30, 12, 22]
})

# Calculate speed
trips['speed_kmh'] = (trips['distance_km'] / trips['duration_min']) * 60

trip_summary = trips.groupby('mode').agg({
    'speed_kmh': 'mean',
    'distance_km': 'mean',
    'trip_id': 'count'
}).rename(columns={'trip_id': 'count'})

print(trip_summary)
```

**Your Tasks**:
- Which transport mode has the highest average speed?
- Calculate the total distance traveled
- Create a bar plot showing trip counts by mode

---

## Exercise 2: Correlation Analysis

### In R

```r
# Calculate correlation between variables
correlation <- cor(mtcars$mpg, mtcars$wt)
print(paste("Correlation between mpg and weight:", round(correlation, 3)))

# Correlation with p-value
cor_test <- cor.test(mtcars$mpg, mtcars$wt)
print(cor_test)
```

**Your Tasks**:
- What is the correlation between mpg and horsepower?
- What is the correlation between weight and horsepower?
- Create a correlation matrix for mpg, wt, hp, and cyl
- Interpret the results

### In Python

```python
from scipy import stats

# Correlation
correlation = df['weight'].corr(df['mpg'])
print(f"Correlation between weight and mpg: {correlation:.3f}")

# With p-value
t_stat, p_value = stats.pearsonr(df['weight'], df['mpg'])
print(f"Correlation: {t_stat:.3f}")
print(f"P-value: {p_value:.4f}")

# Correlation matrix
corr_matrix = df[['mpg', 'weight', 'horsepower', 'cylinders']].corr()
```

**Your Tasks**:
- Calculate the correlation between all pairs of variables
- Which pairs are most strongly correlated?
- Are they positive or negative?

---

## Exercise 3: Statistical Testing

### In R

```r
# T-test: compare mpg between two groups
automatic <- mtcars[mtcars$am == 0, ]$mpg
manual <- mtcars[mtcars$am == 1, ]$mpg

t_test_result <- t.test(automatic, manual)
print(t_test_result)
```

**Your Tasks**:
- Interpret the t-test results
- Is there a significant difference in mpg between automatic and manual cars?
- Compare mpg for 4-cylinder vs 8-cylinder cars
- What does the p-value tell you?

### In Python

```python
from scipy import stats

# Compare two groups
group_4cyl = df[df['cylinders'] == 4]['mpg'].dropna()
group_8cyl = df[df['cylinders'] == 8]['mpg'].dropna()

t_stat, p_value = stats.ttest_ind(group_4cyl, group_8cyl)
print(f"T-statistic: {t_stat:.3f}")
print(f"P-value: {p_value:.4f}")
```

**Your Tasks**:
- Compare mpg between different origins
- Are the differences significant?
- What does a p-value < 0.05 mean?

---

## Exercise 4: Linear Regression

### In R

```r
# Fit a linear regression model
model <- lm(mpg ~ wt + hp, data = mtcars)

# View the results
summary(model)

# Make predictions
new_data <- data.frame(wt = c(3, 4, 5), hp = c(100, 150, 200))
predictions <- predict(model, newdata = new_data)
print(predictions)
```

**Your Tasks**:
- What are the model coefficients?
- How do you interpret them?
- Make predictions for new values
- What is the R-squared value?

### In Python

```python
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score

# Prepare data
X = df[['weight', 'horsepower']].dropna()
y = df.loc[X.index, 'mpg']

# Fit model
model = LinearRegression()
model.fit(X, y)

# Results
print(f"Coefficients: {model.coef_}")
print(f"Intercept: {model.intercept_}")
print(f"R-squared: {r2_score(y, model.predict(X)):.3f}")

# Predictions
predictions = model.predict([[3, 100], [4, 150]])
```

**Your Tasks**:
- Build a regression model
- Interpret the coefficients
- Make predictions
- Evaluate model performance

---

## Bonus Challenge

Perform a complete analysis:
1. Load a dataset
2. Explore it with descriptive statistics
3. Calculate correlations
4. Create visualizations
5. Test hypotheses with statistical tests
6. Build a predictive model
7. Present your findings
